{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "An interactive scatter plot of global health statistics by country and year.",
  "data": {
      "url": "https://raw.githubusercontent.com/Patty-tw/FIT3179/main/data/co2_sdi_continent_4yrs.json"
  },
  "width": 650,
  "height": 400,
  "layer": [
      {
          "transform": [
              {
                  "filter": {
                      "field": "country",
                      "equal": "Afghanistan"
                  }
              },
              {
                  "filter": {
                      "param": "year"
                  }
              }
          ],
          "mark": {
              "type": "text",
              "fontSize": 140,
              "x": 420,
              "y": 250,
              "opacity": 0.05
          },
          "encoding": {
              "text": {
                  "field": "year"
              }
          }
      },
      {
          "transform": [
              {
                  "lookup": "cluster",
                  "from": {
                      "key": "id",
                      "fields": [
                          "name"
                      ],
                      "data": {
                          "values": [
                              {
                                  "id": 0,
                                  "name": "Asia"
                              },
                              {
                                  "id": 1,
                                  "name": "Africa"
                              },
                              {
                                  "id": 2,
                                  "name": "Europe"
                              },
                              {
                                  "id": 3,
                                  "name": "South America"
                              },
                              {
                                  "id": 4,
                                  "name": "North America"
                              },
                              {
                                  "id": 5,
                                  "name": "Middle East & North Africa"
                              }
                          ]
                      }
                  }
              }
          ],
          "encoding": {
              "x": {
                  "field": "Sustainable Development Index",
                  "type": "quantitative",
                  "scale": {
                      "domain": [
                          0,
                          90
                      ]
                  },
                  "axis": {
                      "tickCount": 5,
                      "title": "Sustainable Development Index"
                  }
              },
              "y": {
                  "field": "Co2 Emissions Tonnes per person",
                  "type": "quantitative",
                  "scale": {
                      "domain": [
                          0,
                          70
                      ]
                  },
                  "axis": {
                      "tickCount": 5,
                      "title": "Co2 Emissions Tonnes per person"
                  }
              }
          },
          "layer": [
              {
                  "mark": {
                      "type": "line",
                      "size": 4,
                      "color": "lightgray",
                      "strokeCap": "round"
                  },
                  "encoding": {
                      "detail": {
                          "field": "country"
                      },
                      "order": {
                          "field": "year"
                      },
                      "opacity": {
                          "condition": {
                              "test": {
                                  "or": [
                                      {
                                          "param": "hovered",
                                          "empty": false
                                      },
                                      {
                                          "param": "clicked",
                                          "empty": false
                                      }
                                  ]
                              },
                              "value": 0.8
                          },
                          "value": 0
                      }
                  }
              },
              {
                  "params": [
                      {
                          "name": "year",
                          "value": [
                              {
                                  "year": 2018
                              }
                          ],
                          "select": {
                              "type": "point",
                              "fields": [
                                  "year"
                              ]
                          },
                          "bind": {
                              "name": "Year",
                              "input": "range",
                              "min": 1990,
                              "max": 2018,
                              "step": 4
                          }
                      },
                      {
                          "name": "hovered",
                          "select": {
                              "type": "point",
                              "fields": [
                                  "country"
                              ],
                              "toggle": false,
                              "on": "mouseover"
                          }
                      },
                      {
                          "name": "clicked",
                          "select": {
                              "type": "point",
                              "fields": [
                                  "country"
                              ]
                          }
                      },
                      {
                          "name": "continent_highlight",
                          "select": {
                              "type": "point",
                              "fields": [
                                  "name"
                              ]
                          },
                          "bind": "legend"
                      },
                      {
                          "name": "grid",
                          "select": "interval",
                          "bind": "scales"
                      }
                  ],
                  "transform": [
                      {
                          "filter": {
                              "param": "year"
                          }
                      }
                  ],
                  "mark": {
                      "type": "circle",
                      "size": 30,
                      "opacity": 1
                  },
                  "encoding": {
                      
                      "color": {
                          "field": "name",
                          "title": "Region"
                      },
                      "opacity": {
                          "condition": {
                              "param": "continent_highlight",
                              "value": 0.7
                          },
                          "value": 0
                      }
                  }
              },
              {
                  "transform": [
                      {
                          "filter": {
                              "and": [
                                  {
                                      "param": "year"
                                  },
                                  {
                                      "or": [
                                          {
                                              "param": "clicked",
                                              "empty": false
                                          },
                                          {
                                              "param": "hovered",
                                              "empty": false
                                          }
                                      ]
                                  }
                              ]
                          }
                      }
                  ],
                  "mark": {
                      "type": "text",
                      "yOffset": -12,
                      "fontSize": 16,
                      "fontWeight": "bold"
                  },
                  "encoding": {
                      "text": {
                          "field": "country"
                      },
                      "color": {
                          "field": "name",
                          "title": "Region"
                      }
                  }
              },
              {
                  "transform": [
                      {
                          "filter": {
                              "param": "hovered",
                              "empty": false
                          }
                      },
                      {
                          "filter": {
                              "not": {
                                  "param": "year"
                              }
                          }
                      }
                  ],
                  "layer": [
                      {
                          "mark": {
                              "type": "text",
                              "yOffset": -12,
                              "fontSize": 12,
                              "color": "gray"
                          },
                          "encoding": {
                              "text": {
                                  "field": "year"
                              }
                          }
                      },
                      {
                          "mark": {
                              "type": "circle",
                              "color": "gray"
                          }
                      }
                  ]
              }
          ]
      }
  ],
  "config": {
      "font": "Space Grotesk",
      "axis": {
          "labelFontSize": 10,
          "titleFontSize": 14
      },
      "legend": {
          "labelFontSize": 12,
          "titleFontSize": 15
      },
      "title": {
          "anchor": "middle",
          "fontSize": 20,
          "font": "Segoe UI",
          "fontWeight": 600
      }
  }
}